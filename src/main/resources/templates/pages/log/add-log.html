<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Add Worklog</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
</head>
<body>
<!-- Include the Navbar Fragment -->
<div th:replace="fragments/navbar :: navbar"></div>

<div class="container my-5">
    <div class="card shadow-sm rounded-3">
        <div class="card-body">
            <h2 class="card-title mb-4" th:text="${log?.id != null} ? 'Edit Log' : 'Add Log'">Add
                log</h2>

            <form th:action="@{/log/save}" method="post">
                <div class="row g-3">

                    <!-- Hidden input for editing -->
                    <input type="hidden" name="id" th:value="${log?.id}">

                    <div class="col-md-3">
                        <label for="executionDate" class="form-label">Execution date</label>
                        <input type="datetime-local" class="form-control" id="executionDate" name="executionDate"
                               required th:value="${log?.executionDate}">
                    </div>

                    <div class="col-md-3">
                        <label for="employeeId" class="form-label">Employee</label>
                        <select class="form-select" id="employeeId" name="employeeId" required>
                            <option value="">Select an employee</option>
                            <option th:each="employee : ${employees}"
                                    th:value="${employee.id}"
                                    th:text="${employee.name}"
                                    th:selected="${log?.employee?.id == employee.id}">
                            </option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label for="apartmentId" class="form-label">Apartment</label>
                        <select class="form-select" id="apartmentId" name="apartmentId" required>
                            <option value="">Select an apartment</option>
                            <option th:each="apartment : ${apartments}"
                                    th:value="${apartment.id}"
                                    th:text="${apartment.descriptionFormated()}"
                                    th:selected="${apartment?.id == log?.apartment?.id}">
                            </option>
                        </select>
                    </div>

                    <div class="col-md-2">
                        <label for="duration" class="form-label">Duration</label>
                        <input type="text" class="form-control" id="duration" name="duration" required
                               th:value="${log?.duration}">
                    </div>

                    <div class="col-md-12">
                        <label for="notes" class="form-label">Notes</label>
                        <textarea class="form-control" id="notes" name="notes" th:text="${log?.notes}"></textarea>
                    </div>

                    <div class="col-12 d-flex justify-content-end gap-2 mt-4">
                        <button type="submit" class="btn btn-primary">Submit</button>
                        <a class="btn btn-secondary" th:href="@{/log}">Cancel</a>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer" th:replace="fragments/footer :: footer"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
